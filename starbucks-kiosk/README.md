# ☕ Starbucks Kiosk

### vercel 배포 링크

- https://starbucks-kiosk-umber.vercel.app/

### 📌 프로젝트 소개

이 프로젝트는 2021년 학원 시절 포트폴리오를 Next.js와 TypeScript를 사용하여
리팩토링 한 프로젝트입니다.

### 🛠 기술 스택

- Frontend

  - Next.js 14 -> 15
  - TypeScript
  - TailwindCSS
  - Zustand
  - React-Query

- Backend
  - Firebase

### 🗂 폴더 구조

```bash
about-me
│
├── 📂 app/
│   ├── 📂 _api/                            # 공통 API
│   │   ├── 🗒️ test.ts                      # ex: 사용자 데이터 호출 등
│   ├─── 📂 _api/                            # 공통 API
│   │   ├─── 🗒️test.ts                      # ex: 사용자 데이터 호출 등
----------------------------------------------------------------------------------
│   ├─── 📂 _constants/                      # 전역에서 사용되는 상수 값
----------------------------------------------------------------------------------
│   ├─── 📂 _hooks/                          # 공통 커스텀 훅
│   │   ├─── 🗒️useTest.ts
│   │   └─── 🗒️useTesT.ts
----------------------------------------------------------------------------------
│   ├─── 📂 _lib/                            # 라이브러리
│   │   ├── 📂 firebase/                     # 공통 컴포넌트 (Button, Modal 등)
│   │   │   ├─── 🗒️ config.ts                # 설명 추가 필요
│   │   │   ├─── 🗒️ addDocument.ts           # menu_list document 전체 등록 함수
│   │   │   └─── 🗒️ resetDocument.ts         # menu_list document 전체 리셋 함수
----------------------------------------------------------------------------------
│   ├─── 📂 _mock/                           # DB에 등록할 데이터
│   │    └─── 🗒️ menuItems.ts                # "menu_list"에 등록할 데이터들
----------------------------------------------------------------------------------
│   ├─── 📂 _context/                        #  context API
│   │   ├── 📂 order/                        #
│   │   │   └─── 🗒️ OrderContext.ts          # 포장/매장 여부를 들고있는 놈
│   │   ├── 📂 theme/                        # 테마 provider
│   │   │ ├─── 🗒️ ThemeDetector.ts
│   │   │ └─── 🗒️ ThemeProvider.ts           # menu_list document 전체 리셋 함수
----------------------------------------------------------------------------------
│   ├─── 📂 _store/                          # 전역 상태 (zustand)
│   │    └─── 🗒️ themeStore.ts               # 테마의 전역 상태를 가지고 있음
----------------------------------------------------------------------------------
│   ├─── 📂 _types/                          # 타입 정의
│   │    ├─── 🗒️ menuItems.ts                # menuItems.ts에 사용하는 menu list type
│   │    └─── 🗒️ ThemeType.ts                # 테마 타입
----------------------------------------------------------------------------------
│   ├─── 📂 _ui/                             # UI 관련 요소 모음
│   │   ├── 📂components/                    # 공통 컴포넌트 (Button, Modal 등)
│   │   │   ├─── 📂button/
│   │   │   │   ├── 🗒️Button.tsx             # 공통으로 사용되는 기본 Button
│   │   │   │   └── 🗒️LoginButton.tsx        # 로그인 버튼
│   │   │   └─── 📂modal/
│   │   │   │   ├── 🗒️Alert.tsx              # 알럿
│   │   │   │   └── 🗒️Confirm.tsx            # 컨펌
│   │   ├─── 📂styles/                      # 스타일 관리
│   │   │   └── 🗒️global.css                # 전역 스타일
----------------------------------------------------------------------------------
│   ├─── 📂 _utils/                          # 유틸리티 함수 모음
│   │    └─── 🗒️ helpers.ts                   # 다양한 유틸 함수
----------------------------------------------------------------------------------
│   ├─── 📂 (home)/                          # 메인 페이지
│   │   ├── 📂 components/                   # 메인 페이지에서만 사용되는 컴포넌트
│   │   │   └─── 🗒️ ManagerComponent.tsx
│   │   └─── 🗒️page.tsx/
│   ├─── 📂(pages)/                          # 페이지들
|   │   └─── 📂 menu/                        # 메뉴 페이지
|   |   │   └─── 📂 api/                     # 메뉴 페이지에서 사용되는 api 모음
|   │   │   │   └─── 🗒️ route.ts
│   └── 🗒️layout.tsx                         # 공통 레이아웃 설정
----------------------------------------------------------------------------------
└─── 📂public/                              # 정적 파일 (이미지, 아이콘 등)
     ├─── 📂images/
     └─── 📂fonts/
```

### 앞으로의 과정

-

### 📦 주요 기능

이번 프로젝트는 매장/포장 선택부터 시작해서 메뉴 선택, 포인트 적립/사용, 최종 금액 계산까지(결제X) 가능한 키오스크를 만들 예정이다. 주문이 완료되면 주문서가 인쇄되는 기능까지 구현할 계획이다.
특히 이전 프로젝트와 다르게 관리자 페이지를 추가하려 한다. 메뉴 관리부터 주문 내역 확인, 매출 통계까지 실제 매장에서 필요한 기능들을 담아볼 예정이다.

### 🔥 트러블 슈팅

1. 테마 작업 부분
2. 메뉴 리스트 선택할 때 Link태그로 사용하여 SearchPram에 넣어서 이슈가 생겼었다.

### 📊 성능 최적화

### 🎨 UI/UX 개선

[추가 예정]

### 📝 회고

- 프로젝트를 세팅하다 보니 모든 세팅에 이유가 있어야함을 깨닫게 됐다.
  하여 적게 되었다.

1. TanStack Query
   처음엔 `SWR`이랑 `TanStack Query` 사이에서 고민했고, `Next.js 14` 버전부터 `fetch`에 대해 캐싱이 지원된다 하여 `fetch`만 사용하여 해볼까도 고민했다.
   하지만 당연하게도. `fetch` 캐싱은 서버 컴포넌트에서만 작동하고, 클라이언트 상태 관리나 실시간 업데이트가 필요한 경우 한계가 있다.
   `SWR`도 좋지만 복잡한 상태 관리나 데이터 동기화에서 `TanStack Query`가 더 강점이 더 많다고 하여 체감해보기 위해 선택했다.

사용해보니 `queryKey` 기반의 전역 캐시 시스템으로 어느 컴포넌트에서든 쉽게 데이터에 접근할 수 있었다.
전에 한 프로젝트는 `SWR`로 진행하여 `props drilling`이 굉장히 심했다. `mutate` 마저 `props`로 전달했어야만 했다.

`Next.js` 프로젝트를 한 이유는 현재 프로젝트가 SEO 강화는 하지 않아도 괜찮지만,
사용자 경험 차원(초기 진입 시 렌더링 된 페이지가 보이는 것을 원해서)에서 SSR를 지원하고 싶었다.
그 점에선 TanSack Query가 굉장했다. `prefetchQuery`를 이용한 SSR 구현하는게 굉장히 쉬웠고,
Hydration 과정에서도 캐시가 유지되는 장점이 있었다.
(서버에서 미리 가져온 데이터를 QueryClient의 캐시에 저장해둔다 -> 클라이언트 사이드 렌더링으로 전환되어도 API 호출 없이 데이터 사용)

2. zustand
   토이 프로젝트라 새로운 기술을 시도해봤다. 회사에선 `Jotai`를 써봤었는데 이번엔 `Zustand`를 선택했다.
   `Zustand`도 `Jotai`처럼 러닝커브가 낮아서 좋았다. 하지만 `Jotai`는 단순 `setState` 정도만 가능했지만
   `Zustand`는 상태 변경에 대한 **로직을 직접 작성**할 수 있어서 더 유연했다.
   경험하면서 좋은점들을 더 써보려고한다.

3. Skeleton UI
   로딩은.. Loading... 텍스트나 스피너보다 스켈레톤 UI가 더 나은 사용자 경험을 제공한다고 생각했다.
   사용자가 로딩 중에도 UI 구조를 파악할 수 있다고 생각했고, **Layout Shift** 도 방지할 수 있기 때문이다.
   -> 개인적으로 너무 맘에들어서 패치 딜레이도 넣었다..

[더 추가 예정]
프로젝트를 통해 배운 점
아쉬운 점 & 개선하고 싶은 점
향후 발전 방향

### ✨ More Info

[개인 블로그 링크](https://velog.io/@meowoof/posts)
